# 文字数カウントツール

ブラウザ上で動作する「文字数カウント」ツールです。原稿・SNS・業務文書の分量管理と各種エンコーディングのバイト数確認をワンストップで提供します。

## 🚀 特徴

- **リアルタイムカウント**: 入力中に自動で文字数をカウント（デバウンス対応）
- **多言語対応**: 日本語・英語等の他言語に対応（UIは日本語）
- **包括的な計測**: 文字数、行数、バイト数、原稿用紙換算
- **エンコーディング対応**: UTF-8、UTF-16、Shift_JIS、EUC-JP、ISO-2022-JP
- **原稿用紙ルール**: 400字詰め原稿用紙の一般的なルールを適用
- **ファイル操作**: ドラッグ&ドロップ、インポート/エクスポート
- **設定保存**: ローカルストレージで設定とテキストを自動保存
- **レスポンシブデザイン**: スマートフォンからデスクトップまで対応

## 📋 機能一覧

### 基本機能
- 総文字数（改行含む/含まない）
- 空白・タブ除外文字数
- 行数カウント
- 原稿用紙換算（400字詰め）
- 文字頻度分析（オプション）

### エンコーディング別バイト数
- UTF-8（可変長）
- UTF-16LE/BE（16ビット固定長）
- Shift_JIS（日本語Windows標準）
- EUC-JP（Unix系システム標準）
- ISO-2022-JP（電子メール標準）

### 設定オプション
- リアルタイム/手動カウント切替
- 改行文字の含め方
- 空白・タブの除外設定
- 原稿用紙ルールの適用
- Unicode正規化（NFC/NFKC）
- 表示フォーマット（桁区切り、単位表示）

## 🛠️ 技術仕様

### 開発環境
- **フレームワーク**: React 18 + TypeScript
- **ビルドツール**: Vite
- **スタイリング**: CSS Modules
- **依存ライブラリ**: encoding-japanese（日本語エンコーディング）

### 文字数カウント仕様
- **ベース**: Unicodeコードポイント数
- **サロゲートペア**: 1文字としてカウント
- **結合文字**: コードポイント合計でカウント
- **改行検出**: LF(\n)、CRLF(\r\n)、CR(\r)対応

### パフォーマンス要件
- 10万文字: <50ms
- 100万文字: <1.0秒
- メモリ増分: 100万文字処理時<300MB

## 🚀 セットアップ

### 前提条件
- Node.js 18.0.0以上
- npm または yarn

### インストール
```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# ビルド
npm run build

# プレビュー
npm run preview
```

### 開発用コマンド
```bash
# リント
npm run lint

# フォーマット
npm run format
```

## 📱 使用方法

### 基本操作
1. **テキスト入力**: 大きなテキストエリアに直接入力・貼り付け
2. **ファイル読み込み**: ファイルボタンまたはドラッグ&ドロップ
3. **カウント実行**: リアルタイム（自動）または手動ボタン
4. **結果確認**: 右側のメトリクスカードで確認

### キーボードショートカット
- `Ctrl/Cmd + Enter`: フォーカスを外す
- `Ctrl/Cmd + L`: テキストを全選択
- `Escape`: ヘルプを閉じる

### ファイル操作
- **インポート**: .txtファイル（UTF-8、BOMなし）
- **エクスポート**: 入力テキスト、カウント結果
- **制限**: ファイルサイズ10MB以下

## 🎯 使用例

### 小説・論文執筆
- 原稿用紙ルールをONにして句読点や記号の正確なカウント
- 400字詰め原稿用紙での枚数換算

### SNS投稿
- 文字数制限の確認
- 空白除外で実際の文字数を把握

### 技術文書
- 各種エンコーディングでのバイト数確認
- ファイルサイズの見積もり

### 翻訳作業
- 文字数ベースの翻訳料金計算
- 多言語対応の確認

## 🔧 設定項目

### 基本設定
- **リアルタイムカウント**: 入力中に自動カウント
- **自動保存**: 入力テキストの自動保存
- **文字頻度表示**: 文字の出現頻度を表示

### カウント設定
- **改行を含める**: 改行文字を文字数に含める
- **空白を除外**: スペース、タブ、全角スペースを除外
- **原稿用紙ルール**: 句読点や記号の原稿用紙ルール適用

### 表示設定
- **桁区切り**: 大きな数値を桁区切りで表示
- **単位表示**: 数値に単位を表示

## 📊 原稿用紙換算ルール

400字詰め原稿用紙の一般的なルールに基づく：

- **句読点**: 1マス（、。）
- **かぎ括弧**: 各1マス（「」『』〈〉（ ）【】）
- **三点リーダー・ダッシュ**: 2つで2マス（… ―）
- **促音・拗音**: 1マス（っゃゅょ等）
- **英数字・記号**: 半角1文字=1マス、全角1文字=1マス
- **改行**: マス加算なし（文字数としてはカウント）

## 🌐 対応ブラウザ

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- iOS Safari 14+
- Android Chrome 90+

## 📁 プロジェクト構造

```
text_count/
├── src/
│   ├── components/          # Reactコンポーネント
│   │   ├── TextInput.tsx    # テキスト入力
│   │   ├── CountResults.tsx # カウント結果表示
│   │   ├── SettingsPanel.tsx # 設定パネル
│   │   └── HelpModal.tsx    # ヘルプモーダル
│   ├── utils/               # ユーティリティ
│   │   ├── textCounter.ts   # 文字数カウントロジック
│   │   ├── settings.ts      # 設定管理
│   │   └── fileUtils.ts     # ファイル操作
│   ├── App.tsx              # メインアプリケーション
│   ├── main.tsx             # エントリーポイント
│   └── index.css            # グローバルスタイル
├── public/                  # 静的ファイル
├── package.json             # 依存関係
├── tsconfig.json            # TypeScript設定
├── vite.config.ts           # Vite設定
└── README.md                # このファイル
```

## 🧪 テスト

### 単体テスト
```bash
# テスト実行（将来的に実装予定）
npm test
```

### テストケース
- ASCII文字のみ
- 全角かな・漢字
- サロゲートペア（絵文字）
- 結合文字
- 各改行記号
- 全角/半角スペース、タブ
- 非対応文字を含むエンコーディング

## 🚧 今後の拡張予定

- [ ] 視覚1文字（グラフェムクラスター）カウントモード
- [ ] 文字種別内訳（ひらがな/カタカナ/漢字/英数/記号）
- [ ] 単語数、文数推定
- [ ] PWA対応・オフラインキャッシュ
- [ ] 設定プロファイル（出版社/学校）
- [ ] 差分カウント（直近バージョン比較）
- [ ] Web Worker対応（大文字列処理）

## 📄 ライセンス

MIT License

## 🤝 コントリビューション

1. このリポジトリをフォーク
2. フィーチャーブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add some amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 📞 サポート

問題や質問がある場合は、GitHubのIssuesページで報告してください。

## 🙏 謝辞

- [encoding-japanese](https://github.com/polygonplanet/encoding.js) - 日本語エンコーディングライブラリ
- React チーム - 素晴らしいフレームワーク
- Vite チーム - 高速なビルドツール

---

**文字数カウントツール** - 日本語文書作成者のための包括的な文字数管理ツール 